<ui:FluentWindow x:Class="DriveBox.Views.Windows.RepairProgressWindow"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
             Title="Sửa chữa ứng dụng"
             Height="220"
             Width="450"
             WindowStartupLocation="CenterOwner"
             ResizeMode="NoResize"
             ShowInTaskbar="False"
             Icon="{DynamicResource AppIcon}">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        

        <TextBlock Grid.Row="0" 
                   Text="{Binding WindowTitle}"
                   FontSize="16" 
                   FontWeight="SemiBold"
                   Margin="0,0,0,15"/>
        

        <TextBlock Grid.Row="1"
                   Text="{Binding CurrentAction}"
                   FontSize="14"
                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                   Margin="0,0,0,10"/>
        

        <ProgressBar Grid.Row="2"
                     Height="8"
                     Value="{Binding ProgressPercentage}"
                     Minimum="0"
                     Maximum="100"
                     Margin="0,0,0,15"/>
        

        <ScrollViewer Grid.Row="3" 
                      MaxHeight="80"
                      VerticalScrollBarVisibility="Auto"
                      Margin="0,0,0,15">
            <StackPanel>
                <TextBlock Text="{Binding ProgressDetails}"
                          FontSize="12"
                          Foreground="{DynamicResource TextFillColorTertiaryBrush}"
                          TextWrapping="Wrap"
                          Margin="0,0,0,5"/>
                

                <TextBlock Text="{Binding CurrentFileInfo}"
                          FontSize="11"
                          Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                          TextWrapping="Wrap"
                          Margin="0,0,0,3"
                          Visibility="{Binding CurrentFileInfo, Converter={StaticResource StringToVisibilityConverter}}"/>
                

                <StackPanel Orientation="Horizontal" 
                           Visibility="{Binding SpeedInfo, Converter={StaticResource StringToVisibilityConverter}}">
                    <TextBlock Text="{Binding SpeedInfo}"
                              FontSize="10"
                              Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                              Margin="0,0,10,0"/>
                    <TextBlock Text="{Binding EtaInfo}"
                              FontSize="10"
                              Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
        

        <Button Grid.Row="4"
                Name="CancelButton"
                Content="Hủy"
                Width="80"
                Height="32"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Click="CancelButton_Click"
                Visibility="{Binding CanCancel, Converter={StaticResource BooleanToVisibilityConverter}}"/>
    </Grid>
</ui:FluentWindow>