<ui:FluentWindow x:Class="DriveBox.Views.Windows.DownloadProgressWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 Title="Tải xuống"
                 Height="280"
                 Width="500"
                 WindowStartupLocation="CenterOwner"
                 ResizeMode="NoResize"
                 ShowInTaskbar="True"
                 Icon="{DynamicResource AppIcon}">
    
    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        

        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,16">
            <ui:SymbolIcon Symbol="ArrowDownload24" 
                           FontSize="20" 
                           Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"
                           Margin="0,0,12,0"/>
            <TextBlock Text="{Binding AppTitle}" 
                       FontSize="18" 
                       FontWeight="SemiBold"
                       VerticalAlignment="Center"/>
        </StackPanel>
        

        <TextBlock Grid.Row="1"
                   Text="{Binding CurrentStatus}"
                   FontSize="14"
                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                   Margin="0,0,0,8"/>
        

        <Grid Grid.Row="2" Margin="0,0,0,12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            

            <Grid Grid.Row="0" Margin="0,0,0,4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                          Text="{Binding ProgressText}" 
                          FontSize="13" 
                          FontWeight="Medium"/>
                <TextBlock Grid.Column="1"
                          Text="{Binding ProgressPercentageText}" 
                          FontSize="13" 
                          FontWeight="SemiBold"
                          Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"/>
            </Grid>
            

            <ProgressBar Grid.Row="1"
                         Height="12"
                         Value="{Binding ProgressPercentage}"
                         Minimum="0"
                         Maximum="100"
                         Background="{DynamicResource ControlFillColorDefaultBrush}"
                         Foreground="{DynamicResource AccentFillColorDefaultBrush}"/>
        </Grid>
        

        <Grid Grid.Row="3" Margin="0,0,0,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            

            <StackPanel Grid.Column="0" Orientation="Vertical">
                <TextBlock Text="Tốc độ tải" 
                          FontSize="11" 
                          Foreground="{DynamicResource TextFillColorTertiaryBrush}"
                          Margin="0,0,0,2"/>
                <TextBlock Text="{Binding DownloadSpeed}" 
                          FontSize="13" 
                          FontWeight="SemiBold"/>
            </StackPanel>
            

            <StackPanel Grid.Column="1" Orientation="Vertical" HorizontalAlignment="Right">
                <TextBlock Text="Thời gian còn lại" 
                          FontSize="11" 
                          Foreground="{DynamicResource TextFillColorTertiaryBrush}"
                          Margin="0,0,0,2"/>
                <TextBlock Text="{Binding EstimatedTimeRemaining}" 
                          FontSize="13" 
                          FontWeight="SemiBold"/>
            </StackPanel>
        </Grid>
        

        <Grid Grid.Row="4" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="0"
                      Text="{Binding SizeInformation}" 
                      FontSize="12" 
                      Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
            <TextBlock Grid.Column="1"
                      Text="{Binding AverageSpeed}" 
                      FontSize="12" 
                      Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
        </Grid>
        

        <ScrollViewer Grid.Row="5" 
                      VerticalScrollBarVisibility="Auto"
                      Margin="0,0,0,16">
            <StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,4"
                           Visibility="{Binding CurrentModule, Converter={StaticResource StringToVisibilityConverter}}">
                    <TextBlock Text="Module: " 
                              FontSize="11" 
                              Foreground="{DynamicResource TextFillColorTertiaryBrush}"/>
                    <TextBlock Text="{Binding CurrentModule}" 
                              FontSize="11" 
                              FontWeight="Medium"/>
                </StackPanel>
                

                <StackPanel Orientation="Horizontal"
                           Visibility="{Binding CurrentFileName, Converter={StaticResource StringToVisibilityConverter}}">
                    <TextBlock Text="File: " 
                              FontSize="11" 
                              Foreground="{DynamicResource TextFillColorTertiaryBrush}"/>
                    <TextBlock Text="{Binding CurrentFileName}" 
                              FontSize="11" 
                              FontWeight="Medium"
                              TextWrapping="Wrap"/>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
        

        <StackPanel Grid.Row="6" Orientation="Horizontal" 
                   HorizontalAlignment="Right">

            <ui:Button Content="Hủy" 
                       FontSize="13"
                       Icon="Dismiss24"
                       Appearance="Danger"
                       Command="{Binding CancelCommand}"
                       IsEnabled="{Binding CanCancel}"
                       MinWidth="100"
                       Height="32"
                       ToolTip="Hủy tải xuống"/>
        </StackPanel>
    </Grid>
</ui:FluentWindow>