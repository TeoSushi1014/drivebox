<UserControl x:Class="DriveBox.Views.Controls.ProgressiveLoadingIndicator"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml">
    
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </UserControl.Resources>
    
    <Grid>
        <Border Background="{DynamicResource ApplicationBackgroundBrush}" 
                BorderBrush="{DynamicResource ControlElevationBorderBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="16"
                Margin="4">
            
            <StackPanel Orientation="Horizontal">

                <ui:ProgressRing IsIndeterminate="True" 
                               Width="20" Height="20"
                               Margin="0,0,12,0"
                               Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}"/>
                

                <StackPanel Orientation="Horizontal" Margin="0,0,12,0">
                    <Ellipse Width="8" Height="8" 
                             Fill="{DynamicResource SystemAccentColorSecondaryBrush}"
                             Margin="0,0,8,0"
                             Visibility="{Binding PhaseImmediate, Converter={StaticResource BoolToVisibilityConverter}}"/>
                    <Ellipse Width="8" Height="8" 
                             Fill="{DynamicResource SystemAccentColorSecondaryBrush}"
                             Margin="0,0,8,0"
                             Visibility="{Binding PhaseProgressive, Converter={StaticResource BoolToVisibilityConverter}}"/>
                    <Ellipse Width="8" Height="8" 
                             Fill="{DynamicResource SystemAccentColorSecondaryBrush}"
                             Visibility="{Binding PhaseOnDemand, Converter={StaticResource BoolToVisibilityConverter}}"/>
                </StackPanel>
                

                <TextBlock Text="{Binding LoadingStatus}"
                          VerticalAlignment="Center"
                          FontSize="14"
                          Margin="0,0,12,0"
                          Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                

                <TextBlock Text="{Binding AppsLoadedText}"
                          VerticalAlignment="Center"
                          FontSize="12"
                          Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>