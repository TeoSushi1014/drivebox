<Page
    x:Class="DriveBox.Views.Pages.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:helpers="clr-namespace:DriveBox.Helpers"
    xmlns:local="clr-namespace:DriveBox.Views.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="SettingsPage"
    d:DataContext="{d:DesignInstance local:SettingsPage,
                                     IsDesignTimeCreatable=False}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    mc:Ignorable="d">
    <Page.Resources>
        <helpers:EnumToBooleanConverter x:Key="EnumToBooleanConverter" />
        <helpers:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <helpers:InverseBooleanConverter x:Key="InverseBooleanConverter" />
    </Page.Resources>

    <StackPanel>
        <TextBlock
            FontSize="20"
            FontWeight="Medium"
            Text="Personalization" />
        <TextBlock Margin="0,12,0,0" Text="Theme" />
        <RadioButton
            Margin="0,12,0,0"
            Command="{Binding ViewModel.ChangeThemeCommand, Mode=OneWay}"
            CommandParameter="theme_light"
            Content="Light"
            GroupName="themeSelect"
            IsChecked="{Binding ViewModel.CurrentTheme, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Light, Mode=OneWay}" />
        <RadioButton
            Margin="0,8,0,0"
            Command="{Binding ViewModel.ChangeThemeCommand, Mode=OneWay}"
            CommandParameter="theme_dark"
            Content="Dark"
            GroupName="themeSelect"
            IsChecked="{Binding ViewModel.CurrentTheme, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Dark, Mode=OneWay}" />

        <TextBlock
            Margin="0,24,0,0"
            FontSize="20"
            FontWeight="Medium"
            Text="About DriveBox" />
        <TextBlock Margin="0,12,0,0" Text="{Binding ViewModel.AppVersion, Mode=OneWay}" />



        <TextBlock
            Margin="0,24,0,0"
            FontSize="20"
            FontWeight="Medium"
            Text="Updates" />
        
        <StackPanel Margin="0,12,0,0">
            
            <Button 
                Command="{Binding ViewModel.CheckForUpdatesCommand}" 
                IsEnabled="{Binding ViewModel.IsUiEnabled}"
                Margin="0,0,0,8">
                <StackPanel Orientation="Horizontal">
                    <ui:SymbolIcon Symbol="ArrowClockwise24" Margin="0,0,8,0"/>
                    <TextBlock Text="Check for Updates"/>
                </StackPanel>
            </Button>
            
            <TextBlock 
                Text="{Binding ViewModel.UpdateStatus, Mode=OneWay}" 
                Margin="0,0,0,8"
                Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
            
            <ProgressBar 
                Visibility="{Binding ViewModel.ShowProgressBar, Converter={StaticResource BooleanToVisibilityConverter}}"
                Value="{Binding ViewModel.UpdateProgress, Mode=OneWay}"
                Maximum="100"
                Height="4"
                Margin="0,0,0,8"/>
            
            <Button 
                Command="{Binding ViewModel.DownloadAndInstallUpdateCommand}"
                IsEnabled="{Binding ViewModel.IsUiEnabled}"
                Visibility="{Binding ViewModel.IsUpdateAvailable, Converter={StaticResource BooleanToVisibilityConverter}}"
                Margin="0,0,0,8">
                <StackPanel Orientation="Horizontal">
                    <ui:SymbolIcon Symbol="DataHistogram24" Margin="0,0,8,0"/>
                    <TextBlock Text="Download and Install Update"/>
                </StackPanel>
            </Button>
            
            <Button 
                Command="{Binding ViewModel.OpenGitHubReleasesCommand}"
                IsEnabled="{Binding ViewModel.IsUiEnabled}"
                Visibility="{Binding ViewModel.IsUpdateAvailable, Converter={StaticResource BooleanToVisibilityConverter}}"
                Margin="0,0,0,8">
                <StackPanel Orientation="Horizontal">
                    <ui:SymbolIcon Symbol="Settings24" Margin="0,0,8,0"/>
                    <TextBlock Text="Open GitHub Releases"/>
                </StackPanel>
            </Button>
        </StackPanel>


        <TextBlock
            Margin="0,24,0,0"
            FontSize="20"
            FontWeight="Medium"
            Text="Download Settings" />
        
        <TextBlock Margin="0,12,0,0" Text="Download Path" />
        <TextBlock 
            Margin="0,4,0,0" 
            Text="{Binding ViewModel.DownloadPath, Mode=OneWay}"
            Foreground="{DynamicResource TextFillColorSecondaryBrush}"
            TextWrapping="Wrap"
            FontFamily="Consolas"/>
        
        <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
            <Button 
                Command="{Binding ViewModel.BrowseDownloadPathCommand}"
                Margin="0,0,8,0">
                <StackPanel Orientation="Horizontal">
                    <ui:SymbolIcon Symbol="Folder24" Margin="0,0,8,0"/>
                    <TextBlock Text="Browse..."/>
                </StackPanel>
            </Button>
            
            <Button 
                Command="{Binding ViewModel.ResetDownloadPathCommand}">
                <StackPanel Orientation="Horizontal">
                    <ui:SymbolIcon Symbol="ArrowReset24" Margin="0,0,8,0"/>
                    <TextBlock Text="Reset to Default"/>
                </StackPanel>
            </Button>
        </StackPanel>

        <StackPanel Margin="0,12,0,0">
        <Button Click="GithubIcon_Click" BorderThickness="0" Background="Transparent" ToolTip="Mở GitHub Repository">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <Image Source="/Assets/github.png" Width="32" Height="32" RenderOptions.BitmapScalingMode="HighQuality" Stretch="Uniform"/>
                <TextBlock Text="GitHub - TeoSushi1014" Margin="8,0,0,0" VerticalAlignment="Center"/>
            </StackPanel>
        </Button>
        <Button Click="FacebookIcon_Click" BorderThickness="0" Background="Transparent" ToolTip="Mở Facebook">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <Image Source="/Assets/facebook.png" Width="32" Height="32" RenderOptions.BitmapScalingMode="HighQuality" Stretch="Uniform"/>
                <TextBlock Text="Facebook - Hoàng Việt Quang" Margin="8,0,0,0" VerticalAlignment="Center"/>
            </StackPanel>
        </Button>
        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
            <Button Command="{Binding ViewModel.CopyZaloPhoneNumberCommand}" BorderThickness="0" Background="Transparent" ToolTip="Sao chép số điện thoại">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <Image Source="/Assets/zalo.png" Width="32" Height="32" RenderOptions.BitmapScalingMode="HighQuality" Stretch="Uniform"/>
                    <TextBlock Text="Zalo: 0838696697" Margin="8,0,0,0" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
            <TextBlock 
                    Visibility="{Binding ViewModel.ZaloCopiedVisibility}"
                    Text="Đã sao chép!"
                    Foreground="White"
                    Margin="8,0,0,0"
                    VerticalAlignment="Center"/>
        </StackPanel>
        </StackPanel>
    </StackPanel>
</Page>
